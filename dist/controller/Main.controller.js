sap.ui.define(["sap/ui/core/UIComponent","./BaseController","sap/ui/model/Filter","sap/ui/model/FilterOperator"],function(t,e,n,o){function i(t){return t&&t.__esModule&&typeof t.default!=="undefined"?t.default:t}const s=i(e);const l=s.extend("icl.delivery.controller.Main",{onAfterRendering:function t(){this.disableComboBox("noWriteCombo")},onInit:function e(){s.prototype.onInit.call(this);const n=t.getRouterFor(this);n.getRoute("main").attachMatched(this._initialFunc,this)},_initialFunc:function t(){this.initTableSelections("collectList");const e=this.getDelivModel();e.setProperty("/oMaintain/title",delComponent.i18n("main_title"));e.setProperty("/oFlags/headerNavBack",false);e.setProperty("/currView","main");e.setProperty("/currView","main");this.loadCollectList(e)},loadCollectList:function t(e){void fetch("/mockData/CollectList.JSON").then(t=>t.json()).then(t=>{const{statsArray:n,typesArray:o}=this.groupBy(t);e.setProperty("/oMaintain/collectionList",{groupByStatus:n,groupByType:o});e.setProperty("/oData/collectList",t)})},groupBy:function t(e){const n={};const o={};e.map(t=>{const{status:e,statusDesc:i,type:s}=t;if(!n[e])n[e]={status:e,statusDesc:i,count:1};else n[e].count+=1;if(!o[s])o[s]={type:s,count:1};else o[s].count+=1});const i=Object.keys(n).map(t=>n[t]);const s=Object.keys(o).map(t=>o[t]);i.unshift({count:e.length,status:"99",statusDesc:delComponent.i18n("all")});return{statsArray:i,typesArray:s}},checked:function t(e){const n=this.getDelivModel();const o=e.getParameter("listItem");const i=e.getParameter("selected");const s=o.getBindingContext("DelModel").getPath();n.setProperty(`${s}/selected`,i);const l=n.getProperty("/oData/collectList");const c=l.filter(t=>t.selected);n.setProperty("/oMaintain/collectionList/showListFooter",c.length)},filter:function t(){const e=this.getDelivModel(),i=this.getView().byId("collectList"),s=i.getBinding("items"),l=[];const{statusFilter:c,searchFilter:r,groupByType:a}=e.getProperty("/oMaintain/collectionList");r&&l.push(this.getSerachFilter(r));const u=this.getTypeFilter(a);u&&l.push(u);if(c&&c!=="99"){l.push(new n("status",o.Contains,c))}s.filter(l)},getSerachFilter:function t(e){const i=new n({filters:[new n("requestId",o.Contains,e),new n("armorId",o.Contains,e),new n("askName",o.Contains,e)],and:false});return i},getTypeFilter:function t(e){const i=[];e.map(t=>{if(t.selected){i.push(new n("type",o.Contains,t.type))}});if(i.length){return new n({filters:i,and:false})}return null},navToCollect:function t(e){const n=this.getDelivModel();const o=e.getSource().getBindingContext("DelModel").getObject();n.setProperty("/oMaintain/collect",{currCollect:o});this.navTo("collect")},navToMultiCollect:function t(e){const n=this.getDelivModel();n.setProperty("/oMaintain/multiCollect",{});this.navTo("multiCollect")}});return l});