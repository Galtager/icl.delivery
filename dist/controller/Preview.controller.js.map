{"version":3,"file":"Preview.controller.js","names":["BaseController","_interopRequireDefault","__BaseController","Preview","extend","onInit","_onInit","BaseController.prototype.onInit.call","oRouter","UIComponent","getRouterFor","getRoute","attachMatched","_initialFunc","deliveryModel","getDelivModel","setProperty","checkSelected","_checkSelected","oEvent","getParameter","items","getProperty","allSelected","every","item","acceptCollect","onPrintFinish","_onPrintFinish","cancelFragment","onFragmentHandler","finishMulti","_finishMulti"],"sources":["../../src/controller/Preview.controller.ts"],"sourcesContent":["import UIComponent from \"sap/ui/core/UIComponent\";\r\nimport BaseController from \"./BaseController\";\r\nimport Event from \"sap/ui/base/Event\";\r\nimport { ICollectRequest } from \"./Main.controller\";\r\n\r\n/**\r\n * @namespace icl.delivery.controller\r\n */\r\nexport default class Preview extends BaseController {\r\n    onInit() {\r\n        super.onInit();\r\n        const oRouter = UIComponent.getRouterFor(this);\r\n        // eslint-disable-next-line @typescript-eslint/unbound-method\r\n        oRouter.getRoute(\"preview\").attachMatched(this._initialFunc, this);\r\n    }\r\n    public _initialFunc() {\r\n        const deliveryModel = this.getDelivModel();\r\n        deliveryModel.setProperty('/currView', 'preview');\r\n        deliveryModel.setProperty('/oMaintain/previewAccept', false)\r\n    }\r\n    checkSelected(oEvent: Event) {\r\n        const deliveryModel = this.getDelivModel();\r\n\r\n        if (oEvent.getParameter('selected')) {\r\n            // check there is some selected\r\n            const items = deliveryModel.getProperty('/oMaintain/multiCollect/previewItems') as ICollectRequest[];\r\n            const allSelected = items.every(item => item.acceptCollect);\r\n            deliveryModel.setProperty('/oMaintain/previewAccept', allSelected)\r\n        }\r\n        else {\r\n            deliveryModel.setProperty('/oMaintain/previewAccept', false)\r\n        }\r\n    }\r\n    public onPrintFinish(oEvent: Event) {\r\n        // lock the screen and show after collect state\r\n        this.cancelFragment(oEvent, 'Dialog_FinishMulti')\r\n        void this.onFragmentHandler(oEvent, 'Dialog_Print', true)\r\n\r\n    }\r\n    finishMulti(oEvent: Event) {\r\n        void this.onFragmentHandler(oEvent, 'Dialog_FinishMulti', true)\r\n    }\r\n}"],"mappings":";;;;QACOA,cAAc,GAAAC,sBAAA,CAAAC,gBAAA;EAIrB;AACA;AACA;EAFA,MAGqBC,OAAO,GAASH,cAAc,CAAAI,MAAA;IAC/CC,MAAM,WAAAC,QAAA,EAAG;MACLC,oCAAA;MACA,MAAMC,OAAO,GAAGC,WAAW,CAACC,YAAY,CAAC,IAAI,CAAC;MAC9C;MACAF,OAAO,CAACG,QAAQ,CAAC,SAAS,CAAC,CAACC,aAAa,CAAC,IAAI,CAACC,YAAY,EAAE,IAAI,CAAC;IACtE,CAAC;IACMA,YAAY,WAAAA,aAAA,EAAG;MAClB,MAAMC,aAAa,GAAG,IAAI,CAACC,aAAa,EAAE;MAC1CD,aAAa,CAACE,WAAW,CAAC,WAAW,EAAE,SAAS,CAAC;MACjDF,aAAa,CAACE,WAAW,CAAC,0BAA0B,EAAE,KAAK,CAAC;IAChE,CAAC;IACDC,aAAa,WAAAC,eAACC,MAAa,EAAE;MACzB,MAAML,aAAa,GAAG,IAAI,CAACC,aAAa,EAAE;MAE1C,IAAII,MAAM,CAACC,YAAY,CAAC,UAAU,CAAC,EAAE;QACjC;QACA,MAAMC,KAAK,GAAGP,aAAa,CAACQ,WAAW,CAAC,sCAAsC,CAAsB;QACpG,MAAMC,WAAW,GAAGF,KAAK,CAACG,KAAK,CAACC,IAAI,IAAIA,IAAI,CAACC,aAAa,CAAC;QAC3DZ,aAAa,CAACE,WAAW,CAAC,0BAA0B,EAAEO,WAAW,CAAC;MACtE,CAAC,MACI;QACDT,aAAa,CAACE,WAAW,CAAC,0BAA0B,EAAE,KAAK,CAAC;MAChE;IACJ,CAAC;IACMW,aAAa,WAAAC,eAACT,MAAa,EAAE;MAChC;MACA,IAAI,CAACU,cAAc,CAACV,MAAM,EAAE,oBAAoB,CAAC;MACjD,KAAK,IAAI,CAACW,iBAAiB,CAACX,MAAM,EAAE,cAAc,EAAE,IAAI,CAAC;IAE7D,CAAC;IACDY,WAAW,WAAAC,aAACb,MAAa,EAAE;MACvB,KAAK,IAAI,CAACW,iBAAiB,CAACX,MAAM,EAAE,oBAAoB,EAAE,IAAI,CAAC;IACnE;EAAC;EAAA,OAjCgBhB,OAAO;AAAA"}